"use strict";var Q=Object.create;var L=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty;var te=(e,t)=>{for(var o in t)L(e,o,{get:t[o],enumerable:!0})},V=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Z(t))!ee.call(e,n)&&n!==o&&L(e,n,{get:()=>t[n],enumerable:!(r=W(t,n))||r.enumerable});return e};var B=(e,t,o)=>(o=e!=null?Q(j(e)):{},V(t||!e||!e.__esModule?L(o,"default",{value:e,enumerable:!0}):o,e)),oe=e=>V(L({},"__esModule",{value:!0}),e);var ae={};te(ae,{default:()=>Y});module.exports=oe(ae);var p=require("@raycast/api"),F=require("react");var S=require("@raycast/api"),T=require("react/jsx-runtime");var H=({title:e,isPinned:t,onAction:o})=>(0,T.jsx)(S.Action,{title:e,icon:t?S.Icon.PinDisabled:S.Icon.Pin,onAction:o});var R=({icon:e=S.Icon.Trash,title:t,dialog:o,onAction:r,shortcut:n={modifiers:["cmd"],key:"delete"}})=>(0,T.jsx)(S.Action,{style:S.Action.Style.Destructive,icon:e,title:t,onAction:async()=>{await(0,S.confirmAlert)({title:o.title??t,message:o.message??"This action cannot be undone",icon:e,primaryAction:{title:o.primaryButton??t,style:S.Alert.ActionStyle.Destructive,onAction:r}})},shortcut:n});var x=require("@raycast/api"),C=require("react/jsx-runtime"),J=()=>(0,C.jsx)(x.ActionPanel.Section,{title:"Preferences",children:(0,C.jsx)(x.Action,{icon:x.Icon.Gear,title:"Open Extension Preferences",onAction:x.openExtensionPreferences})});var g=require("@raycast/api"),M=require("react"),D={id:"default",updated_at:new Date().toISOString(),created_at:new Date().toISOString(),name:"Haiku",prompt:"You are a helpful assistant.",option:"claude-3-haiku-20240307",temperature:1,pinned:!1};function q(){let[e,t]=(0,M.useState)([]),[o,r]=(0,M.useState)(!1),n=["claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307","claude-2.1","claude-2.0"];(0,M.useEffect)(()=>{(async()=>{r(!0);let l=await g.LocalStorage.getItem("models");t(l?s=>[...s,...JSON.parse(l)]:[D]),r(!1)})()},[]),(0,M.useEffect)(()=>{g.LocalStorage.setItem("models",JSON.stringify(e))},[e]);let f=(0,M.useCallback)(async l=>{let s=await(0,g.showToast)({title:"Saving your model...",style:g.Toast.Style.Animated}),i={...l,created_at:new Date().toISOString()};t([...e,i]),s.title="Model saved!",s.style=g.Toast.Style.Success},[t,e]),A=(0,M.useCallback)(async l=>{t(s=>s.map(i=>i.id===l.id?l:i))},[t,e]),w=(0,M.useCallback)(async l=>{let s=await(0,g.showToast)({title:"Remove your model...",style:g.Toast.Style.Animated}),i=e.filter(I=>I.id!==l.id);t(i),s.title="Model removed!",s.style=g.Toast.Style.Success},[t,e]),a=(0,M.useCallback)(async()=>{let l=await(0,g.showToast)({title:"Clearing your models ...",style:g.Toast.Style.Animated}),s=e.filter(i=>i.id===D.id);t(s),l.title="Models cleared!",l.style=g.Toast.Style.Success},[t]);return(0,M.useMemo)(()=>({data:e,isLoading:o,option:n,add:f,update:A,remove:w,clear:a}),[e,o,n,f,A,w,a])}var c=require("@raycast/api"),O=require("react");var K=B(require("crypto")),P=new Uint8Array(256),v=P.length;function b(){return v>P.length-16&&(K.default.randomFillSync(P),v=0),P.slice(v,v+=16)}var m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));function X(e,t=0){return m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]}var G=B(require("crypto")),k={randomUUID:G.default.randomUUID};function ne(e,t,o){if(k.randomUUID&&!t&&!e)return k.randomUUID();e=e||{};let r=e.random||(e.rng||b)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){o=o||0;for(let n=0;n<16;++n)t[o+n]=r[n];return t}return X(r)}var _=ne;var h=require("react/jsx-runtime"),U=e=>{let{use:t}=e,[o,r]=(0,O.useState)(e?.model??{id:_(),updated_at:"",created_at:new Date().toISOString(),name:e?.name??"",prompt:"",option:"claude-3-haiku-20240307",temperature:1,pinned:!1}),[n,f]=(0,O.useState)({name:"",prompt:"",option:"",temperature:""}),A=async a=>{let l={...a,updated_at:new Date().toISOString()};if(typeof l.temperature=="string"){let s=await(0,c.showToast)({title:"Update your model...",style:c.Toast.Style.Animated});l={...l,temperature:Number(l.temperature)},s.title="Model updated!",s.style=c.Toast.Style.Success}e.model?t.models.update({...l,id:e.model.id,created_at:e.model.created_at}):t.models.add({...l,id:o.id,created_at:o.created_at})},w=t.models.option;return(0,h.jsxs)(c.Form,{actions:(0,h.jsx)(c.ActionPanel,{children:(0,h.jsx)(c.Action.SubmitForm,{title:"Submit",onSubmit:A})}),children:[(0,h.jsx)(c.Form.TextField,{id:"name",title:"Name",placeholder:"Name your model",defaultValue:o.name,error:n.name.length>0?n.name:void 0,onChange:a=>r({...o,name:a}),onBlur:a=>{a.target.value?.length==0?f({...n,name:"Required"}):n.name&&n.name.length>0&&f({...n,name:""})}}),(0,h.jsx)(c.Form.TextArea,{id:"prompt",title:"Prompt",placeholder:"Describe your prompt",defaultValue:o.prompt,error:n.prompt.length>0?n.prompt:void 0,onChange:a=>r({...o,prompt:a}),onBlur:a=>{a.target.value?.length==0?f({...n,prompt:"Required"}):n.prompt&&n.prompt.length>0&&f({...n,prompt:""})}}),(0,h.jsx)(c.Form.TextField,{id:"temperature",title:"Temperature",placeholder:"Set your sampling temperature (0 - 1)",defaultValue:o.temperature.toLocaleString(),error:n.temperature.length>0?n.temperature:void 0,onChange:a=>{r({...o,temperature:Number(a)})},onBlur:a=>{a.target.value?.length==0?f({...n,temperature:"Required"}):Number(a.target.value??0)<0?f({...n,temperature:"Minimal value is 0"}):Number(a.target.value??0)>1?f({...n,temperature:"Maximal value is 1"}):n.temperature&&n.temperature.length>0&&f({...n,temperature:""})}}),(0,h.jsx)(c.Form.Dropdown,{id:"option",title:"Model",placeholder:"Choose model option",defaultValue:o.option,onChange:a=>r({...o,option:a,updated_at:new Date().toISOString()}),children:w.map(a=>(0,h.jsx)(c.Form.Dropdown.Item,{value:a,title:a},a))}),o.id!=="default"&&(0,h.jsx)(c.Form.Checkbox,{id:"pinned",title:"Pinned",label:"Pin model",defaultValue:o.pinned,onChange:a=>r({...o,pinned:a})})]})};var y=require("@raycast/api"),u=require("react/jsx-runtime"),E=({title:e,models:t,selectedModel:o,actionPanel:r})=>(0,u.jsx)(y.List.Section,{title:e,subtitle:t.length.toLocaleString(),children:t.map(n=>(0,u.jsx)(N,{model:n,selectedModel:o,actionPanel:r},n.id))}),N=({model:e,selectedModel:t,actionPanel:o})=>(0,u.jsx)(y.List.Item,{id:e.id,title:e.name,accessories:[{text:new Date(e.updated_at??0).toLocaleDateString()}],detail:(0,u.jsx)(ie,{model:e}),actions:t===e.id?o(e):void 0},e.id),ie=e=>{let{model:t,markdown:o}=e;return(0,u.jsx)(y.List.Item.Detail,{markdown:o??`${t.prompt}`,metadata:(0,u.jsxs)(y.List.Item.Detail.Metadata,{children:[(0,u.jsx)(y.List.Item.Detail.Metadata.TagList,{title:"Model",children:(0,u.jsx)(y.List.Item.Detail.Metadata.TagList.Item,{text:t.option})}),(0,u.jsx)(y.List.Item.Detail.Metadata.Label,{title:"Temperature",text:t.temperature.toLocaleString()}),(0,u.jsx)(y.List.Item.Detail.Metadata.Separator,{}),(0,u.jsx)(y.List.Item.Detail.Metadata.Label,{title:"ID",text:t.id}),(0,u.jsx)(y.List.Item.Detail.Metadata.Label,{title:"Updated at",text:new Date(t.updated_at??0).toLocaleString()}),(0,u.jsx)(y.List.Item.Detail.Metadata.Label,{title:"Created at",text:new Date(t.created_at??0).toLocaleString()})]})})};var d=require("react/jsx-runtime");function Y(){let e=q(),[t,o]=(0,F.useState)(""),[r,n]=(0,F.useState)(null),{push:f}=(0,p.useNavigation)(),A=i=>(0,d.jsxs)(p.ActionPanel,{children:[(0,d.jsx)(p.Action,{title:"Edit Model",shortcut:{modifiers:["cmd"],key:"t"},icon:p.Icon.Text,onAction:()=>f((0,d.jsx)(U,{model:i,use:{models:e}}))}),(0,d.jsx)(p.Action,{title:"Create Model",shortcut:{modifiers:["cmd"],key:"t"},icon:p.Icon.Text,onAction:()=>f((0,d.jsx)(U,{name:t,use:{models:e}}))}),i.id!=="default"&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H,{title:i.pinned?"Unpin Model":"Pin Model",isPinned:i.pinned,onAction:()=>e.update({...i,pinned:!i.pinned})}),(0,d.jsx)(p.ActionPanel.Section,{title:"Delete",children:(0,d.jsx)(R,{title:"Remove",dialog:{title:"Are you sure you want to remove this model from your collection?"},onAction:()=>e.remove(i)})})]}),(0,d.jsx)(J,{})]}),a=e.data.sort((i,I)=>new Date(I.updated_at??0).getTime()-new Date(i.updated_at??0).getTime()).filter((i,I,$)=>I===$.findIndex(z=>z.id===i.id)).filter(i=>t===""?!0:i.prompt.toLowerCase().includes(t.toLowerCase())||i.name.toLowerCase().includes(t.toLowerCase())||i.temperature.toLocaleString().toLowerCase().includes(t.toLowerCase())),l=a.find(i=>i.id===D.id)??D,s=a.filter(i=>i.id!==D.id);return(0,d.jsx)(p.List,{isShowingDetail:a.length!==0,isLoading:e.isLoading,filtering:!1,throttle:!1,navigationTitle:"Models",selectedItemId:r||void 0,onSelectionChange:i=>{i!==r&&n(i)},searchBarPlaceholder:"Search model...",searchText:t,onSearchTextChange:o,children:e.data.length===0?(0,d.jsx)(p.List.EmptyView,{title:"No custom models",description:"Create new model with \u2318 + T shortcut",icon:p.Icon.Stars}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(N,{model:l,selectedModel:r,actionPanel:A},"default"),(0,d.jsx)(E,{title:"Pinned",models:s.filter(i=>i.pinned),selectedModel:r,actionPanel:A},"pinned"),(0,d.jsx)(E,{title:"Models",models:s.filter(i=>!i.pinned),selectedModel:r,actionPanel:A},"models")]})})}
