{
  "env": {
    "MAX_THINKING_TOKENS": "32000",
    "CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR": "1",
    "CLAUDE_ENV_FILE": "/Users/username/.claude/env-loader.sh"
  },
  "includeCoAuthoredBy": false,
  "permissions": {
    "allow": [
      "Bash(brew info:*)",
      "Bash(brew list:*)",
      "Bash(brew search:*)",
      "Bash(brew services:*)",
      "Bash(cat:*)",
      "Bash(chezmoi diff:*)",
      "Bash(chezmoi git log:*)",
      "Bash(chezmoi git status:*)",
      "Bash(chezmoi managed:*)",
      "Bash(chezmoi source-path:*)",
      "Bash(chezmoi status:*)",
      "Bash(chezmoi update:*)",
      "Bash(claude config --help:*)",
      "Bash(claude mcp --help:*)",
      "Bash(defaults read:*)",
      "Bash(dig:*)",
      "Bash(du:*)",
      "Bash(find:*)",
      "Bash(gh run list:*)",
      "Bash(git init:*)",
      "Bash(grep:*)",
      "Bash(jq:*)",
      "Bash(ls:*)",
      "Bash(lsof:*)",
      "Bash(node:*)",
      "Bash(npm info:*)",
      "Bash(npm init:*)",
      "Bash(npm run build:*)",
      "Bash(npm run dev:*)",
      "Bash(npm run format:*)",
      "Bash(npm test)",
      "Bash(npx biome check:*)",
      "Bash(npx lefthook install)",
      "Bash(npx oxfmt:*)",
      "Bash(npx textlint:*)",
      "Bash(npx tsc --noEmit)",
      "Bash(npx tsc:*)",
      "Bash(npx tsx:*)",
      "Bash(npx wrangler:*)",
      "Bash(paste:*)",
      "Bash(plutil:*)",
      "Bash(ps:*)",
      "Bash(sips:*)",
      "Bash(sort:*)",
      "Bash(tail:*)",
      "Bash(tree:*)",
      "Bash(whois:*)",
      "Bash(wrangler --version:*)",
      "Skill(frontend-design)",
      "WebFetch(domain:api.github.com)",
      "WebFetch(domain:apify.com)",
      "WebFetch(domain:arxiv.org)",
      "WebFetch(domain:cdn.jsdelivr.net)",
      "WebFetch(domain:cdn.simpleicons.org)",
      "WebFetch(domain:code.claude.com)",
      "WebFetch(domain:cookbook.openai.com)",
      "WebFetch(domain:developers.cloudflare.com)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:docs.claude.com)",
      "WebFetch(domain:docs.firecrawl.dev)",
      "WebFetch(domain:empathyfirstmedia.com)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:icons.getbootstrap.com)",
      "WebFetch(domain:lefthook.dev)",
      "WebFetch(domain:medium.com)",
      "WebFetch(domain:openai.com)",
      "WebFetch(domain:platform.claude.com)",
      "WebFetch(domain:platform.openai.com)",
      "WebFetch(domain:pure.md)",
      "WebFetch(domain:qiita.com)",
      "WebFetch(domain:railway.com)",
      "WebFetch(domain:rapidapi.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(domain:sakana.ai)",
      "WebFetch(domain:simpleicons.org)",
      "WebFetch(domain:spider.cloud)",
      "WebFetch(domain:supadata.ai)",
      "WebFetch(domain:vercel.com)",
      "WebFetch(domain:www.anthropic.com)",
      "WebFetch(domain:www.firecrawl.dev)",
      "WebFetch(domain:www.humanlayer.dev)",
      "WebFetch(domain:www.npmjs.com)",
      "WebFetch(domain:x.ai)",
      "WebFetch(domain:zenn.dev)",
      "WebSearch"
    ],
    "deny": ["NotebookEdit", "NotebookRead", "Bash(bash -c:*)", "Bash(pip:*"],
    "ask": [
      "Bash(rm:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git rebase:*)",
      "Bash(curl:*)"
    ]
  },
  "model": "opus",
  "enableAllProjectMcpServers": true,
  "hooks": {
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/pre-compact.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "WebSearch",
        "hooks": [
          {
            "type": "command",
            "command": "echo '⚠️ Web 検索時は必ず「2025」を含めること' >&2"
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | grep -qE '(\\.env|\\.git/|package-lock\\.json|credentials|secrets)' && { echo '⚠️ 保護されたファイルへの編集はブロックされました' >&2; exit 2; } || exit 0"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "fp=$(jq -r '.tool_input.file_path'); [[ \"$fp\" == *.ts || \"$fp\" == *.tsx || \"$fp\" == *.js || \"$fp\" == *.jsx || \"$fp\" == *.json ]] && npx oxfmt \"$fp\" 2>/dev/null || true",
            "timeout": 30
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/restore-context.sh"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/session-init.sh"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.prompt' | grep -qiE '(sk-[a-zA-Z0-9]{20,}|xoxb-|ghp_|AKIA[A-Z0-9]{16})' && { echo '{\"decision\":\"block\",\"reason\":\"⚠️ API キーやトークンが含まれています。1Password などで管理してください。\"}'; exit 0; } || exit 0"
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "input=$(cat); cwd=$(echo \"$input\" | jq -r '.workspace.current_dir // .cwd'); dir_display=\"${cwd/#$HOME/\\~}\"; git_info=\"\"; if git -C \"$cwd\" rev-parse --git-dir >/dev/null 2>&1; then branch=$(git -C \"$cwd\" branch --show-current 2>/dev/null || echo \"detached\"); status_output=$(git -C \"$cwd\" --no-optional-locks status --porcelain 2>/dev/null); modified=$(echo \"$status_output\" | grep -c \"^ M\" || true); added=$(echo \"$status_output\" | grep -c \"^A\" || true); deleted=$(echo \"$status_output\" | grep -c \"^D\" || true); untracked=$(echo \"$status_output\" | grep -c \"^??\" || true); ahead_behind=$(git -C \"$cwd\" --no-optional-locks rev-list --left-right --count HEAD...@{upstream} 2>/dev/null || echo \"0 0\"); ahead=$(echo \"$ahead_behind\" | awk '{print $1}'); behind=$(echo \"$ahead_behind\" | awk '{print $2}'); git_status=\"\"; [[ $modified -gt 0 ]] && git_status=\"${git_status}~${modified}\"; [[ $added -gt 0 ]] && git_status=\"${git_status}+${added}\"; [[ $deleted -gt 0 ]] && git_status=\"${git_status}x${deleted}\"; [[ $untracked -gt 0 ]] && git_status=\"${git_status}?${untracked}\"; [[ $ahead -gt 0 ]] && git_status=\"${git_status}>${ahead}\"; [[ $behind -gt 0 ]] && git_status=\"${git_status}<${behind}\"; if [[ -n \"$git_status\" ]]; then git_info=$(printf \" \\033[32mgit\\033[0m \\033[33m%s\\033[0m \\033[31m[%s]\\033[0m\" \"$branch\" \"$git_status\"); else git_info=$(printf \" \\033[32mgit\\033[0m \\033[33m%s\\033[0m\" \"$branch\"); fi; fi; printf \"\\033[36m%s\\033[0m%s\" \"$dir_display\" \"$git_info\""
  },
  "enabledPlugins": {
    "frontend-design@claude-code-plugins": true
  },
  "outputStyle": "Explanatory",
  "sandbox": {
    "enabled": true,
    "autoAllowBashIfSandboxed": true
  }
}
